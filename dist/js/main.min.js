var __extends=this&&this.__extends||function(e,s){function t(){this.constructor=e}for(var o in s)s.hasOwnProperty(o)&&(e[o]=s[o]);e.prototype=null===s?Object.create(s):(t.prototype=s.prototype,new t)},Point=function(){function e(e,s){this.posX=e,this.posY=s}return e}(),Cell=function(e){function s(s,t){e.call(this,s,t),this.html="<div id='x"+this.posX+"y"+this.posY+"' class='cell'></div>"}return __extends(s,e),s}(Point),Elem=function(e){function s(s,t,o){e.call(this,s,t),this.prevPosX=19,this.prevPosY=19,this.className=o,this.draw()}return __extends(s,e),s.prototype.draw=function(){var e=document.getElementById("x"+this.posX+"y"+this.posY);e.className=e.className+" "+this.className,null!=this.prevPosX&&null!=this.prevPosY&&(e=document.getElementById("x"+this.prevPosX+"y"+this.prevPosY),e.className="cell")},s}(Point),Snake=function(){function e(e){this.head=new Elem(0,3,"snake-head"),this.snakeBody=new Array(e),this.snakeBody[0]=new Elem(0,2,"snake-body"),this.snakeBody[1]=new Elem(0,1,"snake-body"),this.snakeBody[2]=new Elem(0,0,"snake-body"),this.len=3}return e.prototype.checkApple=function(e){if(this.head.posX==e.posX&&this.head.posY==e.posY){for(var s=!0;s===!0;){e.posX=Math.floor(20*Math.random()),e.posY=Math.floor(20*Math.random());for(var t=!1,o=0;o<this.len;o++)e.posX==this.snakeBody[o].posX&&e.posY==this.snakeBody[o].posY&&(t=!0),(e.posX==this.head.posX||e.posY==this.head.posY)&&(t=!0);s=t}return s===!1&&(e.draw(),this.snakeBody[this.len]=new Elem(this.snakeBody[this.len-1].prevPosX,this.snakeBody[this.len-1].prevPosY,"snake-body"),this.len++),!0}return!1},e.prototype.checkCollisions=function(){return this.head.posX<0||this.head.posX>20||this.head.posY<0||this.head.posY>20?!0:document.getElementById("x"+this.head.posX+"y"+this.head.posY).className.indexOf("snake-body")>-1?!0:!1},e.prototype.move=function(e){this.head.prevPosX=this.head.posX,this.head.prevPosY=this.head.posY;var s=!0;if("left"==e?this.head.posY--:"right"==e?this.head.posY++:"up"==e?this.head.posX--:"down"==e&&this.head.posX++,this.checkCollisions()===!1){this.head.draw();for(var t=0;t<this.len;t++)this.snakeBody[t].prevPosX=this.snakeBody[t].posX,this.snakeBody[t].prevPosY=this.snakeBody[t].posY,0===t?(this.snakeBody[t].posX=this.head.prevPosX,this.snakeBody[t].posY=this.head.prevPosY):(this.snakeBody[t].posX=this.snakeBody[t-1].prevPosX,this.snakeBody[t].posY=this.snakeBody[t-1].prevPosY),this.snakeBody[t].draw()}else s=!1;return s},e}(),Grid=function(){function e(e,s){this.rows=e,this.cols=s;for(var t=0;t<this.rows;t++)for(var o=0;o<this.cols;o++)document.getElementById("grid").innerHTML+=new Cell(t,o).html}return e}(),Main=function(){function e(){this.score=0}return e.prototype.init=function(){document.getElementById("grid").innerHTML="",document.getElementById("score").innerHTML="0";var e=this;this.grid=new Grid(20,20),this.maxLen=this.grid.rows*this.grid.cols,this.snake=new Snake(this.maxLen),this.apple=new Elem(9,9,"apple"),this.direction="right",this.score=0,document.getElementById("start").onclick=function(){document.getElementById("game-over").style.display="none";var s=document.getElementById("difficulty"),t=s.options[s.selectedIndex].value,o=120;"Easy"==t?o=500:"Medium"==t?o=120:"Hard"==t?o=90:"Expert"==t&&(o=50),document.getElementById("body").onkeypress=function(s){97==s.which||97==s.keyCode?e.direction="left":100==s.which||100==s.keyCode?e.direction="right":115==s.which||115==s.keyCode?e.direction="down":(119==s.which||119==s.keyCode)&&(e.direction="up")};var n=setInterval(function(){e.snake.checkApple(e.apple)===!0&&(e.score++,document.getElementById("score").innerHTML=e.score+""),e.snake.move(e.direction)===!1&&(document.getElementById("game-over").innerHTML="Game Over. Your score was: "+e.score,document.getElementById("game-over").style.display="block",clearInterval(n),e.init()),e.snake.checkCollisions()},o)}},e}(),main=new Main;main.init();